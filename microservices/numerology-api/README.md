# Numerology API

Микросервис для расчёта и визуализации нумерологических матриц (квадрат Пифагора, совместимость, программы) с генерацией изображений и JSON-ответов. Используется как часть архитектуры Telegram-бота, но может применяться и отдельно.

## Основные возможности

- Расчёт квадрата Пифагора по дате рождения
- Генерация PNG-изображения матрицы
- Получение матрицы и изображения в формате base64 (JSON)
- Расчёт расширенной матрицы судьбы с программами
- Расчёт совместимости двух дат рождения (матрица + изображение)
- Готов к интеграции с внешними сервисами и ботами

## Технологический стек

- **Node.js 20+** — серверная платформа
- **TypeScript** — типизированный JavaScript
- **Express** — веб-фреймворк для API
- **canvas** — генерация и обработка изображений
- **Docker** — контейнеризация и деплой
- **dotenv** — управление переменными окружения
- **cpx** — копирование ассетов при сборке

## Структура проекта

- `src/controllers/` — контроллеры (основная логика API)
- `src/services/` — бизнес-логика, генерация изображений, расчёты
- `src/types/` — типы данных
- `src/constants/` — константы для расчётов и визуализации
- `src/images/` — шаблоны и ассеты для генерации изображений
- `src/routes.ts` — маршруты API
- `src/index.ts` — точка входа

## Быстрый старт

1. **Установите Node.js 20+ и npm**
2. **Установите зависимости:**
   ```bash
   npm ci
   ```
3. **Соберите проект:**
   ```bash
   npm run build
   ```
4. **Запустите сервер:**
   ```bash
   npm start
   ```
   По умолчанию сервис стартует на порту 3001.

5. **Для разработки:**
   ```bash
   npm run dev
   ```

## Переменные окружения

Создайте файл `.env` в корне и укажите:
```
PORT=3001
```
(или любой другой порт)

## Основные эндпоинты

Все маршруты начинаются с `/api`:

- `POST /api/calculate` — расчёт квадрата Пифагора, ответ — PNG-изображение
- `POST /api/calculate-json` — расчёт квадрата Пифагора, ответ — JSON с base64 PNG
- `POST /api/calculate-matrix` — расчёт расширенной матрицы судьбы, ответ — JSON с base64 PNG и программами
- `POST /api/matrix/compatibility/calculate` — расчёт совместимости двух дат рождения, ответ — JSON с base64 PNG

## Скрипты npm

- `npm run dev` — запуск в режиме разработки
- `npm run build` — сборка проекта
- `npm start` — запуск собранного сервера

## Контакты

by Morzh  
@: kla_atu@mail.ru

--- 